{"version":3,"sources":["webpack:///./src/pages/customer/login/alter-psw-bymail.vue?9e8d","webpack:///./src/pages/customer/login/alter-psw-bymail.vue?8106","webpack:///src/pages/customer/login/alter-psw-bymail.vue","webpack:///./src/pages/customer/login/alter-psw-bymail.vue?5504","webpack:///./src/pages/customer/login/alter-psw-bymail.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","step","attrs","model","value","callback","$$v","email","expression","on","step1","_v","_m","verify","style","color","verifyFrozenTime","getVerify","_s","verifyFrozenTimer","step2","_e","ref","v5Cfg","host","token","staticRenderFns","component"],"mappings":"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","file":"js/chunk-b26734f6.5c351b42.js","sourcesContent":["import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./alter-psw-bymail.vue?vue&type=style&index=0&id=afaa8696&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./alter-psw-bymail.vue?vue&type=style&index=0&id=afaa8696&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.step===0)?[_c('h5-input',{staticClass:\"h5-input-email\",attrs:{\"type\":\"text\",\"clearable\":\"\",\"focus\":\"\",\"placeholder\":\"请输入绑定的邮箱\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_c('button',{staticClass:\"H5-btn H5-btn-primary next-step\",attrs:{\"type\":\"button\",\"disabled\":_vm.email===''},on:{\"click\":_vm.step1}},[_vm._v(\"下一步 \")])]:(_vm.step===1)?[_vm._m(0),_c('div',{staticClass:\"verify-container\"},[_c('h5-input',{staticClass:\"h5-input-verify\",attrs:{\"type\":\"text\",\"clearable\":\"\",\"focus\":\"\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.verify),callback:function ($$v) {_vm.verify=$$v},expression:\"verify\"}}),_c('span',{staticClass:\"verify-a\",style:({color:_vm.verifyFrozenTime!==0?'#C0C0C0':'#FF6100'}),on:{\"click\":_vm.getVerify}},[_vm._v(\" \"+_vm._s(_vm.verifyFrozenTime===0?(_vm.verifyFrozenTimer?'重新获取':'点击获取'):_vm.verifyFrozenTime+'s后重试')+\" \")])],1),_c('button',{staticClass:\"H5-btn H5-btn-primary next-step\",attrs:{\"type\":\"button\",\"disabled\":_vm.verify===''},on:{\"click\":_vm.step2}},[_vm._v(\"确认 \")])]:(_vm.step===2)?[_c('alter-psw')]:_vm._e(),_c('V5Dialog',{ref:\"v5dialog\",attrs:{\"host\":_vm.v5Cfg.host,\"token\":_vm.v5Cfg.token}})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"verify-tip\"},[_c('img',{staticClass:\"email-safe\",attrs:{\"src\":\"/email-safe.png\",\"mode\":\"widthFix\",\"alt\":\"\"}}),_c('div',{staticClass:\"tip-txt\"},[_c('div',[_vm._v(\"为了您的账号安全，需要验证您的邮箱\")]),_c('div',[_vm._v(\"ccy*****163.com\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container\">\r\n        <template v-if=\"step===0\">\r\n            <h5-input class=\"h5-input-email\" type=\"text\" clearable focus v-model=\"email\" placeholder=\"请输入绑定的邮箱\"/>\r\n            <button type=\"button\" :disabled=\"email===''\" class=\"H5-btn H5-btn-primary next-step\" @click=\"step1\">下一步\r\n            </button>\r\n        </template>\r\n        <template v-else-if=\"step===1\">\r\n            <div class=\"verify-tip\">\r\n                <img class=\"email-safe\" src=\"/email-safe.png\" mode=\"widthFix\" alt=\"\"/>\r\n                <div class=\"tip-txt\">\r\n                    <div>为了您的账号安全，需要验证您的邮箱</div>\r\n                    <div>ccy*****163.com</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"verify-container\">\r\n                <h5-input class=\"h5-input-verify\" type=\"text\" clearable focus v-model=\"verify\" placeholder=\"请输入验证码\"/>\r\n                <span class=\"verify-a\"\r\n                      :style=\"{color:verifyFrozenTime!==0?'#C0C0C0':'#FF6100'}\"\r\n                      @click=\"getVerify\">\r\n                    {{verifyFrozenTime===0?(verifyFrozenTimer?'重新获取':'点击获取'):verifyFrozenTime+'s后重试'}}\r\n                </span>\r\n            </div>\r\n            <button type=\"button\" :disabled=\"verify===''\" class=\"H5-btn H5-btn-primary next-step\" @click=\"step2\">确认\r\n            </button>\r\n        </template>\r\n        <template v-else-if=\"step===2\">\r\n            <alter-psw/>\r\n        </template>\r\n        <V5Dialog ref=\"v5dialog\" :host=\"v5Cfg.host\" :token=\"v5Cfg.token\"/>\r\n    </div>\r\n</template>\r\n<script>\r\n    import alterPsw from './alter-psw';\r\n    import {V5Dialog} from 'verify5-vue';\r\n    import h5Input from '@/components/form/h5-input.vue'\r\n\r\n    export default {\r\n        name: \"alterpsw-by-email\",\r\n        components: {\r\n            alterPsw,\r\n            V5Dialog,\r\n            h5Input\r\n        },\r\n        data() {\r\n            return {\r\n                v5Cfg: {host: \"\", token: \"\"},\r\n                email: \"\",\r\n                verify: \"\",\r\n                verifyFrozenTime: 0,\r\n                verifyFrozenTimer: undefined,\r\n                step: 0  //0填写邮箱,1输入验证码,2修改密码\r\n            }\r\n        },\r\n        created() {\r\n            this.$util.request({\r\n                url: \"/customer/login/verify/token\"\r\n            }).then(res => {\r\n                this.v5Cfg = {\r\n                    host: this.$util.verify.host,\r\n                    token: res ? res.data : \"\",\r\n                    trustLevel: this.$util.verify.trustLevel,\r\n                };\r\n            }).catch(function (error) {\r\n                console.error(error);\r\n            });\r\n            let username = this.$util.getUrlParam(\"username\") || \"\";\r\n            if (username.indexOf(\"@\") !== -1) {\r\n                this.email = username;\r\n            }\r\n        },\r\n        methods: {\r\n            step1() {\r\n                var reg = /^\\w+((.\\w+)|(-\\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/; //正则表达式\r\n                if (!reg.test(this.email)) { //正则验证不通过，格式不对\r\n\r\n                } else {\r\n                    let that = this;\r\n                    this.$refs.v5dialog.verify((result) => {\r\n                        that.$util.verify.valid2nd(result, () => {\r\n                            console.log(\"verify success\");\r\n                            this.step = 1\r\n                        }, () => {\r\n                            console.log(\"verify fail\");\r\n                        });\r\n                    });\r\n                }\r\n            },\r\n            getVerify() {\r\n                if (this.verifyFrozenTime !== 0) {\r\n                    return;\r\n                }\r\n                //cooldown\r\n                let that = this;\r\n                this.verifyFrozenTime = 60;\r\n                let time = setInterval(function () {\r\n                    that.verifyFrozenTime = that.verifyFrozenTime - 1;\r\n                    if (that.verifyFrozenTime === 0) {\r\n                        clearInterval(time);\r\n                        this.verifyFrozenTimer = undefined;\r\n                    }\r\n                }, 1000);\r\n                this.verifyFrozenTimer = time;\r\n            },\r\n            step2() {\r\n                if (this.verifyFrozenTimer) {\r\n                    clearInterval(this.verifyFrozenTimer);\r\n                }\r\n                this.step = 2\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @import \"/node_modules/verify5-css/css/v5.css\";\r\n\r\n    .container {\r\n        background-color: $page-color-base;\r\n        padding-top: $spacing-col-base;\r\n    }\r\n\r\n    .email-input {\r\n    }\r\n\r\n    .next-step {\r\n        margin-top: $spacing-col-base;\r\n        margin-left: $spacing-row-base;\r\n        margin-right: $spacing-row-base;\r\n    }\r\n\r\n    .h5-input-email {\r\n        width: 100%;\r\n    }\r\n\r\n    .verify-container {\r\n        display: flex;\r\n        background-color: white;\r\n        align-items: center;\r\n\r\n        .h5-input-verify {\r\n            flex: 7;\r\n        }\r\n\r\n        .verify-a {\r\n            border-left: solid $border-color-base thin;\r\n            text-align: center;\r\n            flex: 3;\r\n        }\r\n    }\r\n\r\n    .verify-tip {\r\n        display: flex;\r\n        align-items: center;\r\n        flex-direction: column;\r\n\r\n        .email-safe {\r\n            width: $img-size-hg;\r\n        }\r\n\r\n        .tip-txt {\r\n            text-align: center;\r\n            font-size: $text-size-base;\r\n            margin-top: $spacing-col-base;\r\n            margin-bottom: $spacing-col-base;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./alter-psw-bymail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./alter-psw-bymail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./alter-psw-bymail.vue?vue&type=template&id=afaa8696&scoped=true&\"\nimport script from \"./alter-psw-bymail.vue?vue&type=script&lang=js&\"\nexport * from \"./alter-psw-bymail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./alter-psw-bymail.vue?vue&type=style&index=0&id=afaa8696&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"afaa8696\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}